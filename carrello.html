<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrello</title>
    <link rel="stylesheet" href="Css/posti.css">
    <link rel="stylesheet" href="Css/home.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <!-- Barra superiore -->
    <div class="boxMenu" >
        <div class="bio" style="width: 100%; height: 120px; margin-top: 0;">
            <div id="container">
                <h4 id="txt">The Ellusa Cinema</h4>
                <span id="gradient"></span>
                <span id="light"></span>
            </div> 
        </div>
    </div>

    <!-- Carrello -->
    <div class="car">
        <h2>Carrello</h2>
        <div id="biglietti">
            <!-- Biglietti aggiunti saranno mostrati qui -->
        </div>
        <div class="totale">
            Totale: <span id="totale">0</span> €
        </div>
        <div class="metodo-pagamento">
            <h3>Metodo di Pagamento</h3>
            <select id="metodoPagamento" onchange="mostraDatiPagamento()">
                <option value="">Seleziona un metodo</option>
                <option value="paypal">PayPal</option>
                <option value="mastercard">Mastercard</option>
            </select>
            <div class="dati-pagamento" id="paypalDati">
                <label for="emailPaypal">Email PayPal:</label>
                <input type="email" id="emailPaypal" placeholder="Inserisci l'email">
            </div>
            <div class="dati-pagamento" id="mastercardDati">
                <label for="numeroCarta">Numero Carta:</label>
                <input type="text" id="numeroCarta" placeholder="Inserisci il numero">
                <label for="scadenzaCarta">Scadenza:</label>
                <input type="text" id="scadenzaCarta" placeholder="MM/AA">
                <label for="cvvCarta">CVV:</label>
                <input type="text" id="cvvCarta" placeholder="CVV">
            </div>
        </div>
        <button onclick="vaiAllaPagina()">Completa Acquisto</button>
    </div>


    <style>
        .car {
            height: 350px;
            width: 100%;

           h2 {
            color: darkgoldenrod;
            margin-left: 750px;
            }

            #biglietti {
                margin-top: 40px;
                color: darkgoldenrod;
                margin-left: 300px;
                
            }

            .totale {
            margin-top: 40px;
            margin-left: 500px;
            font-weight: bold;
            margin-top: 20px;
            color: darkgoldenrod;
            }

    
            .metodo-pagamento {
            margin-top: 20px;
            color: darkgoldenrod;
            margin-left: 300px;
        }

        .dati-pagamento {
            color: darkgoldenrod;
            display: none;
            margin-top: 10px;
            
        }

        select, input{
        background-color: black; /* Sfondo nero */
        color: darkgoldenrod; /* Testo in darkgoldenrod */
        border: 1px solid darkgoldenrod; /* Bordo colore darkgoldenrod */
        border-radius: 5px;
        padding: 10px;
        font-size: 16px;
        margin-top: 10px;
        }


        select:focus, input:focus{
            outline: none; /* Rimuove il contorno predefinito */
            box-shadow: 0 0 5px darkgoldenrod; /* Effetto luminoso su focus */
        }

        button{
            margin-left: 300px;
            margin-top: 20px;
            color: darkgoldenrod;
            background-color: black;
            border: solid 2px darkgoldenrod;
        }

        button:hover{
            background-color: darkgoldenrod;
            color: black;
        }
        
    }
    </style>


    <script>
        let totale = 0;

// Funzione per aggiungere un biglietto al carrello
function aggiungiBiglietto(posti, fila, prezzo) {
    const bigliettiDiv = document.getElementById('biglietti');
    const bigliettoDiv = document.createElement('div');
    const totaleBiglietto = posti * prezzo;

    bigliettoDiv.innerHTML = `Posti: ${posti}, Fila: ${fila}, Prezzo: ${prezzo}€ - Totale: ${totaleBiglietto}€`;
    bigliettiDiv.appendChild(bigliettoDiv);

    totale += totaleBiglietto;
    document.getElementById('totale').innerText = totale;
}

// Funzione per mostrare i dati di pagamento in base al metodo scelto
function mostraDatiPagamento() {
    const metodo = document.getElementById('metodoPagamento').value;
    document.getElementById('paypalDati').style.display = metodo === 'paypal' ? 'block' : 'none';
    document.getElementById('mastercardDati').style.display = metodo === 'mastercard' ? 'block' : 'none';
}

// Funzione per validare l'email
function validaEmail(email) {
    const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    return regex.test(email);
}

// Funzione per validare il numero della carta di credito
function validaNumeroCarta(numeroCarta) {
    const regex = /^[0-9]{16}$/; // Esattamente 16 cifre
    return regex.test(numeroCarta);
}

// Funzione per validare la data di scadenza (formato MM/AA)
function validaScadenza(scadenza) {
    const regex = /^(0[1-9]|1[0-2])\/([0-9]{2})$/; // Formato MM/AA
    return regex.test(scadenza);
}

// Funzione per validare il CVV (3 cifre)
function validaCVV(cvv) {
    const regex = /^[0-9]{3}$/; // Esattamente 3 cifre
    return regex.test(cvv);
}

// Funzione per completare l'acquisto
function completaAcquisto() {
    const metodo = document.getElementById('metodoPagamento').value;
    if (!metodo) {
        alert('Seleziona un metodo di pagamento!');
        return;
    }

    if (metodo === 'paypal') {
        const email = document.getElementById('emailPaypal').value;
        if (!validaEmail(email)) {
            alert('Inserisci un\'email valida per PayPal!');
            return;
        }
    } else if (metodo === 'mastercard') {
        const numeroCarta = document.getElementById('numeroCarta').value;
        const scadenza = document.getElementById('scadenzaCarta').value;
        const cvv = document.getElementById('cvvCarta').value;

        if (!validaNumeroCarta(numeroCarta)) {
            alert('Inserisci un numero di carta valido (16 cifre)!');
            return;
        }

        if (!validaScadenza(scadenza)) {
            alert('Inserisci una data di scadenza valida (MM/AA)!');
            return;
        }

        if (!validaCVV(cvv)) {
            alert('Inserisci un CVV valido (3 cifre)!');
            return;
        }
    }

    alert('Acquisto completato con successo!');
}

function vaiAllaPagina() {
        window.location.href = "card.html"; // Sostituisci con il nome del tuo file HTML
    }

// Esempio di aggiunta biglietti
aggiungiBiglietto(2, 'A', 10);
aggiungiBiglietto(3, 'B', 15);
    </script>
</body>
</html>
